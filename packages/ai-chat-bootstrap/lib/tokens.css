/* Aggregated tokens (legacy single import).
   Now layered: primitives -> semantic -> dark -> component hooks & globals.
   Consumers can alternatively import the specific layers:
     import 'ai-chat-bootstrap/tokens.primitives.css'
     import 'ai-chat-bootstrap/tokens.dark.css' // optional
     import 'ai-chat-bootstrap/tokens.css'      // for hooks & globals
*/

@import "./tokens.primitives.css";
@import "./tokens.dark.css";

/* Component & feature hook variables with fallbacks to defaults. */
:root {
  --acb-chat-container-bg: var(--background, var(--acb-default-bg));
  --acb-chat-container-border: var(--secondary, var(--acb-default-secondary));
  --acb-chat-container-radius: var(--radius, var(--acb-default-radius-base));
  --acb-chat-header-bg: var(--background, var(--acb-default-bg));
  --acb-chat-header-fg: var(--foreground, var(--acb-default-fg));
  --acb-chat-header-border: var(--secondary, var(--acb-default-secondary));
  --acb-chat-messages-bg: transparent;
  --acb-chat-message-user-bg: var(--primary, var(--acb-default-primary));
  --acb-chat-message-user-fg: var(
    --primary-foreground,
    var(--acb-default-primary-fg)
  );
  --acb-chat-message-assistant-bg: var(--muted, var(--acb-default-muted));
  --acb-chat-message-assistant-fg: var(
    --muted-foreground,
    var(--acb-default-muted-fg)
  );
  --acb-chat-message-system-bg: var(--accent, var(--acb-default-accent));
  --acb-chat-message-system-fg: var(
    --accent-foreground,
    var(--acb-default-accent-fg)
  );
  --acb-chat-message-radius: var(--radius, var(--acb-default-radius-base));
  --acb-chat-input-wrapper-bg: oklch(
    from var(--background, var(--acb-default-bg)) l c h / 0.5
  );
  --acb-chat-input-wrapper-border: var(
    --secondary,
    var(--acb-default-secondary)
  );
  --acb-chat-input-bg: var(--background, var(--acb-default-bg));
  --acb-chat-input-border: var(--input, var(--acb-default-input));
  --acb-chat-input-fg: var(--foreground, var(--acb-default-fg));
  --acb-chat-input-toolbar-bg: var(--background, var(--acb-default-bg));
  --acb-chat-input-toolbar-border: var(--border, var(--acb-default-border));
  --acb-scrollbar-track: var(--border, var(--acb-default-border));
  --acb-scrollbar-thumb: color-mix(
    in oklab,
    var(--foreground, var(--acb-default-fg)) 25%,
    var(--border, var(--acb-default-border))
  );
  --acb-scrollbar-thumb-hover: color-mix(
    in oklab,
    var(--foreground, var(--acb-default-fg)) 35%,
    var(--border, var(--acb-default-border))
  );
  --acb-tool-bg: var(--card, var(--acb-default-card));
  --acb-tool-border: var(--border, var(--acb-default-border));
  --acb-tool-radius: var(--radius, var(--acb-default-radius-base));
  --acb-tool-header-bg: var(--muted, var(--acb-default-muted));
  --acb-tool-header-fg: var(--muted-foreground, var(--acb-default-muted-fg));
  --acb-tool-input-bg: var(--muted, var(--acb-default-muted));
  --acb-tool-input-fg: var(--foreground, var(--acb-default-fg));
  --acb-tool-output-bg: var(--accent, var(--acb-default-accent));
  --acb-tool-output-fg: var(--accent-foreground, var(--acb-default-accent-fg));
  --acb-tool-error-bg: color-mix(
    in oklab,
    var(--destructive, var(--acb-default-destructive)) 15%,
    var(--background, var(--acb-default-bg))
  );
  --acb-tool-error-fg: var(--destructive, var(--acb-default-destructive));
  --acb-reasoning-fg: var(--muted-foreground, var(--acb-default-muted-fg));
  --acb-reasoning-icon: var(--muted-foreground, var(--acb-default-muted-fg));
  --acb-code-bg: var(--background, var(--acb-default-bg));
  --acb-code-fg: var(--foreground, var(--acb-default-fg));
  --acb-code-border: var(--border, var(--acb-default-border));
  --acb-code-radius: calc(var(--radius, var(--acb-default-radius-base)) - 2px);
  --acb-code-line-number-fg: var(
    --muted-foreground,
    var(--acb-default-muted-fg)
  );
  --acb-prompt-border: var(--acb-chat-input-border);
  --acb-prompt-bg: var(--acb-chat-input-bg);
  --acb-prompt-fg: var(--acb-chat-input-fg);
}

/* Dark-only hook adjustments. */
.dark,
:root[data-theme="dark"],
html[data-theme="dark"] {
  --acb-chat-header-bg: var(--card, var(--acb-default-card));
  --acb-chat-input-wrapper-bg: oklch(
    from var(--background, var(--acb-default-bg)) l c h / 0.5
  );
  --acb-chat-message-assistant-bg: var(--muted, var(--acb-default-muted));
  --acb-scrollbar-track: var(--secondary, var(--acb-default-secondary));
  --acb-scrollbar-thumb: color-mix(
    in oklab,
    var(--foreground, var(--acb-default-fg)) 20%,
    var(--secondary, var(--acb-default-secondary))
  );
  --acb-scrollbar-thumb-hover: color-mix(
    in oklab,
    var(--foreground, var(--acb-default-fg)) 30%,
    var(--secondary, var(--acb-default-secondary))
  );
  --acb-tool-header-bg: color-mix(
    in oklab,
    var(--muted, var(--acb-default-muted)) 60%,
    black
  );
  --acb-tool-input-bg: color-mix(
    in oklab,
    var(--muted, var(--acb-default-muted)) 55%,
    black
  );
  --acb-tool-output-bg: color-mix(
    in oklab,
    var(--accent, var(--acb-default-accent)) 55%,
    black
  );
  --acb-code-bg: var(--card, var(--acb-default-card));
}

:root[data-theme="dark"] .acb-scrollbar::-webkit-scrollbar-track,
.dark .acb-scrollbar::-webkit-scrollbar-track,
html[data-theme="dark"] .acb-scrollbar::-webkit-scrollbar-track {
  background: var(--acb-scrollbar-track); /* darker track */
}

:root[data-theme="dark"] .acb-scrollbar::-webkit-scrollbar-thumb,
.dark .acb-scrollbar::-webkit-scrollbar-thumb,
html[data-theme="dark"] .acb-scrollbar::-webkit-scrollbar-thumb {
  background: var(--acb-scrollbar-thumb);
  border: 2px solid var(--acb-scrollbar-track);
}

:root[data-theme="dark"] .acb-scrollbar:hover::-webkit-scrollbar-thumb,
.dark .acb-scrollbar:hover::-webkit-scrollbar-thumb,
html[data-theme="dark"] .acb-scrollbar:hover::-webkit-scrollbar-thumb {
  background: var(--acb-scrollbar-thumb-hover);
}

/* Light/base scrollbar styling (so variables apply in both themes) */
.acb-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: var(--acb-scrollbar-thumb) var(--acb-scrollbar-track);
}
.acb-scrollbar::-webkit-scrollbar {
  width: var(--acb-scrollbar-size, 10px);
  height: var(--acb-scrollbar-size, 10px);
}
.acb-scrollbar::-webkit-scrollbar-track {
  background: var(--acb-scrollbar-track);
}
.acb-scrollbar::-webkit-scrollbar-thumb {
  background: var(--acb-scrollbar-thumb);
  border-radius: 999px;
  border: 2px solid var(--acb-scrollbar-track);
}
.acb-scrollbar:hover::-webkit-scrollbar-thumb {
  background: var(--acb-scrollbar-thumb-hover);
}

/* Typography globals */
body {
  font-family: var(--font-family);
}
